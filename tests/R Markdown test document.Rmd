---
title: "Tidystats R Markdown test document"
output:
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# Load packages
library(tidyverse)
library(knitr)
library(tidystats)
library(stringr)

# Options
options(digits = 2)
```

### Setup

Start by reading in the data frame containing the output of all the statistical models.

```{r get_results, message = FALSE}
results <- read_stats("results.csv")
```

### Reporting results

The `tidystats` function to report statistics is `report()`. This function consists of two necessary arguments:

- `results`: The list containing the output of the statistical models
- `identifier`: The identifier of the model you want to report

In some cases you also need to supply a term. Some (if not most) statistical models consist of multiple terms, so you need to provide the specific term you want to report, using the `term` argument.

By default the function will return all of the required statistics to report in APA style. Optionally, you can also ask for just one specific statistic by using the `statistic` argument.

### Supported statistical tests

The following statistical tests can be used to produce APA output:

- t-tests
- correlations

### Examples

#### t-tests

We currently support 4 different t-tests, tested on Student's *sleep* data. The output is shown in the following table.

```{r}
stats_list_to_df(results) %>%
  filter(str_detect(method, "t-test")) %>%
  select(identifier, method, estimate, statistic, df_error, p_value, type) %>%
  kable()
```

Examples of APA output of the four different t-tests are listed below.

**One Sample *t*-test**

- `report(results, "M1_1")`: `r report(results, "M1_1")`

**Two Sample *t*-test:** 

- `report(results, "M1_2")`: `r report(results, "M1_2")`

**Welch's Two Sample *t*-test** 

- `report(results, "M1_3")`: `r report(results, "M1_3")`

**Paired *t*-test** 

- `report(results, "M1_4")`: `r report(results, "M1_4")`

#### Correlations

We currently support 3 different correlations, tested on some random data. The output is shown in the following table.

```{r}
stats_list_to_df(results) %>%
  filter(str_detect(method, "correlation")) %>%
  select(identifier, method, estimate, statistic, df_error, p_value, type) %>%
  kable()
```

Examples of APA output of the three correlation methods are listed below.

**Pearson’s product-moment correlation**

- `report(results, "M2_1")`: `r report(results, "M2_1")`

**Kendall’s rank correlation tau**

- `report(results, "M2_2")`: `r report(results, "M2_2")`

**Spearman’s rank correlation rho**

- `report(results, "M2_3")`: `r report(results, "M2_3")`

#### Regression

We also support regression (of course), tested on the *affect* data frame from the `psych` package. The output of three regression models is shown in the following table.

```{r regression}
stats_list_to_df(results) %>%
  filter(str_detect(method, "regression")) %>%
  select(identifier, term, estimate, std_error, statistic, df_model, 
         df_error, p_value, adj_r_squared, type) %>%
  kable()
```

This table contains more missing data than the previous tables. This is because a regression models returns a row for each term in the model, as well as a row for the model itself. The terms have their estimate, *t*-statistic, and the like, while the model has adjusted *R*<sup>2</sup> squared, the *F*-statistic, and the model and error df. The model term is always called '(Model)', so if you want to produce APA output of the model, use this as the term in the `report()` function. Examples:

**Single term**

- `report(results, "M3_1", "complaints")`: `r report_lm(results, "M3_1", "complaints")`

**Model fit**

- `report(results, "M3_1", "(Model)")`: `r report_lm(results, "M3_1", "(Model)")`
